<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHTTY SHORT STORY</title>
    <!-- Google Fonts for a distinct storybook feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Bebas+Neue&display=swap" rel="stylesheet">
    
    <style>    
    <style>
        /* Global styles and background */
        :root {
            --green: #4CAF50;
            --yellow: #FFC107;
            --brown: #795548;
            --red: #FF5722;
            --light-green: #A5D6A7;
            --dark-green: #388E3C;
            --light-yellow: #FFEB3B;
            --text-color: #333;
            --card-bg-color: #fcf6e8;
            --card-shadow: rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px;
            --hover-shadow: rgba(0, 0, 0, 0.2) 0px 20px 25px -5px, rgba(0, 0, 0, 0.1) 0px 10px 10px -5px;
            --page-transition-duration: 0.6s;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* Prevent body scroll */
            font-family: 'Merriweather', serif;
            color: var(--text-color);
            background: linear-gradient(135deg, var(--green), var(--yellow), var(--brown));
            background-size: 400% 400%;
            animation: gradient-shift 15s ease infinite;
        }

        /* Animated background elements */
        .jungle-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.2s ease-out; /* Parallax effect */
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .firefly {
            position: absolute;
            width: 5px;
            height: 5px;
            background-color: var(--light-yellow);
            border-radius: 50%;
            box-shadow: 0 0 10px 2px var(--light-yellow), 0 0 20px 5px var(--light-yellow);
            animation: move-firefly 20s infinite ease-in-out, sparkle 1s infinite alternate;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 0 5px white;
            opacity: 0; /* Hidden by default */
            animation: twinkle 2s infinite alternate;
        }

        /* Book Card styles */
        #storybook-card {
            width: 90%;
            max-width: 800px;
            min-height: 60vh;
            background: var(--card-bg-color);
            border-radius: 20px;
            padding: 30px;
            box-sizing: border-box;
            box-shadow: var(--card-shadow);
            transition: box-shadow 0.3s ease-in-out;
            position: relative;
            overflow: hidden; /* Crucial for page transitions */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        #storybook-card:hover {
            box-shadow: var(--hover-shadow);
        }
        
        /* Story page content styling */
        .page-container {
            transition: transform var(--page-transition-duration) ease-in-out, opacity var(--page-transition-duration) ease-in-out;
            opacity: 0;
            transform: translateX(50px);
            padding-bottom: 50px; /* Space for nav */
        }
        
        .page-container.active {
            opacity: 1;
            transform: translateX(0);
        }
        
        .page-container.exiting {
            opacity: 0;
            transform: translateX(-50px);
        }

        .cover-page h1 {
            font-family: 'Charmonman', cursive;
            font-size: clamp(2.5rem, 5vw, 4rem);
            color: var(--brown);
            text-align: center;
            margin-bottom: 20px;
        }

        .cover-page img {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            display: block;
            border-radius: 15px;
            border: 5px solid var(--brown);
            box-shadow: var(--card-shadow);
        }

        .cover-page button {
            display: block;
            margin: 30px auto 0;
            padding: 15px 30px;
            font-size: 1.5rem;
            font-family: 'Charmonman', cursive;
            background-color: var(--green);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .cover-page button:hover, .cover-page button:focus {
            background-color: var(--dark-green);
            transform: scale(1.05);
            outline: none;
        }
        
        /* Page-specific styling */
        .page-title {
            font-family: 'Charmonman', cursive;
            font-size: clamp(1.8rem, 4vw, 3rem);
            color: var(--brown);
            text-align: center;
            margin-bottom: 20px;
        }
        
        .page-text {
            font-size: clamp(1rem, 2vw, 1.2rem);
            line-height: 1.6;
            text-align: justify;
        }
        
        .illustrations {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .illustration-frame {
            position: relative;
            border-radius: 15px;
            border: 5px solid var(--brown);
            box-shadow: var(--card-shadow);
            overflow: hidden;
            flex: 1 1 45%;
            max-width: 45%;
            transition: transform 0.3s ease-in-out;
            cursor: pointer;
            animation: bounce-in 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .illustration-frame:hover {
            transform: scale(1.05) rotate(1deg);
        }
        
        .illustration-frame img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Navigation styles */
        #navigation {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-button {
            padding: 10px 20px;
            background-color: var(--green);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            font-family: 'Charmonman', cursive;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, background-color 0.3s ease;
            width: 120px; /* fixed width for better alignment */
        }
        
        .nav-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .nav-button:hover:not(:disabled), .nav-button:focus:not(:disabled) {
            transform: scale(1.05);
            background-color: var(--dark-green);
            outline: none;
        }
        
        #page-counter {
            font-family: 'Merriweather', serif;
            font-size: 1.2rem;
            color: var(--brown);
            white-space: nowrap;
        }

        /* Keyframe animations */
        @keyframes bounce-in {
            0% { transform: scale(0.5); opacity: 0; }
            80% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }

        @keyframes move-firefly {
            0% { top: 10%; left: 10%; }
            25% { top: 80%; left: 30%; }
            50% { top: 20%; left: 60%; }
            75% { top: 70%; left: 80%; }
            100% { top: 10%; left: 10%; }
        }
        
        @keyframes sparkle {
            0% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @keyframes twinkle {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            #storybook-card {
                padding: 20px;
                width: 95%;
            }
            
            .illustrations {
                flex-direction: column;
            }
            
            .illustration-frame {
                max-width: 100%;
            }
            
            #navigation {
                flex-direction: column;
                gap: 10px;
                bottom: 10px;
            }
            
            .nav-button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="jungle-container">
        <!-- Animated floating fireflies -->
        <div class="firefly" style="top: 20%; left: 30%; animation-delay: 1s;"></div>
        <div class="firefly" style="top: 50%; left: 80%; animation-delay: 3s;"></div>
        <div class="firefly" style="top: 70%; left: 10%; animation-delay: 5s;"></div>
        <div class="firefly" style="top: 40%; left: 55%; animation-delay: 7s;"></div>

        <!-- Storybook container -->
        <article id="storybook-card">
            <!-- Story content will be dynamically loaded here -->
            <div id="page-content" class="page-container"></div>
            
            <!-- Navigation controls -->
            <nav id="navigation" style="display: none;">
                <button id="prevBtn" class="nav-button">Previous</button>
                <span id="page-counter"></span>
                <button id="nextBtn" class="nav-button">Next</button>
            </nav>
        </article>
    </div>
    
    <!-- Audio for page turn sound -->
    <audio id="page-flip-sound" src="https://commondatastorage.googleapis.com/codeskulptor-assets/sound_page_turn.mp3"></audio>

    <script>
        // Store all story content in a single JavaScript array
        const story = [
            {
                title: 'The Little Artist',
                text: 'In the heart of the Emerald Jungle, where the air was thick with the sweet perfume of orchids, lived a chameleon named Leo. To the other jungle creatures, Leo was a little artist, a magician of the skin. His home was the entire jungle, because he could make any part of it his own just by thinking about it. In the morning, when the golden sun peeked through the giant canopy of leaves, Leo would do his morning stretches. He would start as a deep, sleepy forest green, the color of the leaf he rested on. Then, as the sun warmed his tiny scales, he would begin his color dance. First, a bright, cheerful yellow would bloom across his back, the exact shade of the sunbeam that found him. He would hold that color for a moment, feeling sunny and happy all over. Then, he might spot a scarlet hibiscus flower nearby and, with a little shimmer, he would turn a brilliant, fiery red, just for the fun of it. The hummingbirds would stop in mid air, thinking he was a new kind of flower. This made Leo puff out his chest with pride. His favorite game was hide and seek with the mischievous squirrel monkeys. They would chatter and screech, "Leo, oh Leo! We are coming to find you!" And Leo would just smile. He would press himself against the mottled brown and gray bark of an ancient kapok tree, and poof! He would become the bark. The monkeys would scramble right past him, never noticing the little lizard with the twinkling eyes. Or he would climb onto a mossy stone by the chattering brook and become a perfect copy of the green and gray patterns of the stone. He was the undisputed champion of hide and seek. Leo was proud of his colors. He saw them as his personal collection of jungle jewels. He had Leafy Green for hiding, Sunshine Yellow for happiness, Riverbed Brown for quiet moments, and even a special, rare Sky Blue that he could only manage when he was sitting on a particular blue mushroom that grew after a long rain. He felt his colors were the most wonderful, most useful, and most beautiful things in the whole wide world.',
                images: [
                    { src: 'https://i.imgur.com/kgSUYOO.png', alt: 'Leo the chameleon blending in with a tree' },
                    { src: 'https://i.imgur.com/pNkRUZ1.png', alt: 'A vibrant jungle scene with glowing plants and flowers' }
                ]
            },
            {
                title: 'The Macaw and The Sadness',
                text: 'One afternoon, the jungle grew quiet. A new sound, loud and confident, echoed through the trees. "Behold! Perfection has arrived!" Swooping down from the sky was a magnificent macaw, with feathers that looked like they were painted by a rainbow. His name was Rico. He spotted Leo, who was a simple leafy green at that moment. "Ah, a little lizard," Rico said, looking down his beak. "You change, I have heard. You blend in. That is a fine little trick, I suppose. But it is not true beauty. True beauty, like mine, does not need to hide. It stands out!" Leo felt a strange, cold feeling creep into his heart. His own colors felt fleeting and pale in comparison. That night, Leo could not sleep. He looked at his own skin, a dull, dark green in the moonlight. He thought of Rico\'s brilliant red and deep blue. "I want to be like that," he whispered to himself. The next day, Leo did not play. He found a quiet spot and began to concentrate. He thought of the reddest things he knew. He squeezed his eyes shut and focused with all his might. "Red, red, red," he chanted under his breath. But he was not ruby red. He was a strange, blotchy, pinkish brown, like a bruised mango. He kept trying for days, but the harder he tried to be something he was not, the more confused his own colors became. He forgot what it felt like to be Leafy Green. Soon, a terrible thing began to happen. His skin stopped being blotchy pink or murky purple. It settled into a single, flat, lifeless color. It was a dull, sad gray. He had lost all his colors. He went to sit by the hibiscus flowers, but the hummingbirds ignored him. He was just a dull gray lump. Leo felt more alone than he ever had before. His beautiful gift, the thing that made him Leo, was gone. And he had given it away himself, all because he wanted to be like someone else.',
                images: [
                    { src: 'https://i.imgur.com/XHOtbLZ.png', alt: 'A wise old tortoise sitting by a river' },
                    { src: 'https://i.imgur.com/eEFAPYw.png', alt: 'A peaceful, secluded corner of the jungle' }
                ]
            },
            {
                title: 'The Wise Tortoise',
                text: 'One afternoon, feeling miserable, Leo was trying to cross a wide, open branch. Because he was a plain, solid gray, he was completely exposed. Suddenly, a low, hissing voice whispered, "Well, well. What have we here? A little lizard who has forgotten how to hide." It was Sssilas, the great jungle python. Leo froze. He was a perfect gray target. Just as the snake gathered itself to strike, a deep, slow voice rumbled from below. "Sssilas. Leave the boy alone." It was Sheldon, the oldest and wisest tortoise in the entire jungle. Sheldon\'s eyes were ancient and kind. Sssilas knew better than to argue with Sheldon, and slithered away. Leo scrambled down the tree, his whole body trembling. "Thank you," he whispered. Sheldon looked at Leo\'s dull gray skin. "I have been watching you, little one," he said. "You have lost your light. Why?" Tears welled up in Leo\'s eyes. "I wanted to be like Rico the macaw," he confessed. "His colors are so bright and everyone loves them. My colors are just for hiding. I tried to be red and blue like him, but I justâ€¦ broke." Sheldon listened patiently. Then he spoke. "Little Leo," he began gently. "Does the mighty kapok tree wish it were a delicate orchid? The parrot\'s feathers are beautiful because they belong to a parrot. Your colors are beautiful because they belong to you. Your beauty, Leo, is like the jungle itself. It is alive. It changes with the light, with the leaves, with your feelings. Stop trying to hold a color that is not yours to hold. The colors have not left you, little one. You have just forgotten how to listen to them."',
                images: [
                    { src: 'https://i.imgur.com/MCDLtbZ.png', alt: 'Playful jungle animals swinging from a vine' },
                    { src: 'https://i.imgur.com/FFzzHPF.png', alt: 'A close-up of colorful, glowing leaves' }
                ]
            },
            {
                title: 'A New Beginning',
                text: 'Leo took a deep breath. He thanked Sheldon and slowly made his way to his favorite sunning spot, a smooth, warm rock near the brook. He did not try to change. He just closed his eyes and did what Sheldon said. He felt the warmth of the sun soak into his skin. He remembered all the happy mornings he had spent right here. And as he did, a tiny patch on his back began to glow with a soft, buttery yellow. It was not a big, flashy yellow. It was his yellow. He moved from the rock into the cool shade of a giant fern. He felt the cool, damp air on his skin and thought of nothing but the feeling of peace and safety in the green shade. Slowly, a soft, gentle green washed over his body, chasing the gray away. He scurried to the base of a tree and pressed himself against the bark. He thought about being strong and sturdy, and the rich, comforting brown of the earth filled him in. His colors were back! They came back not because he forced them, but because he accepted himself. The next day, Leo was back to his old self, but quietly confident. He played hide and seek with the monkeys, and his hiding was so good they squealed with delight. He sat with the flowers, and his colors were so vibrant the hummingbirds sang an extra sweet song for him. He saw Rico the macaw showing off on a high branch. Rico\'s feathers were as bright and beautiful as ever. But this time, Leo did not feel a pang of jealousy. He simply thought, "His red is very beautiful. And my green is very beautiful too." He had learned that trying to be a copy of someone else only makes you fade away. But when you embrace who you truly are, with all of your own special magic, you shine brighter than ever before',
                images: [
                    { src: 'https://i.imgur.com/hJgDyoX.png', alt: 'Leo the chameleon and his new friends watching the sunset' }
                ]
            }
        ];

        // --- DOM Elements and State ---
        const pageContent = document.getElementById('page-content');
        const navigation = document.getElementById('navigation');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const pageCounter = document.getElementById('page-counter');
        const storybookCard = document.getElementById('storybook-card');
        const jungleContainer = document.querySelector('.jungle-container');
        const pageFlipSound = document.getElementById('page-flip-sound');
        const startButton = document.createElement('button');
        startButton.textContent = 'Start Story';
        startButton.setAttribute('aria-label', 'Start the story');

        let currentPage = 0;
        const totalPages = story.length;

        // --- Event Listeners ---
        startButton.addEventListener('click', () => {
            currentPage = 0;
            renderPage();
            navigation.style.display = 'flex';
        });

        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages - 1) {
                currentPage++;
                renderPage();
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentPage > 0) {
                currentPage--;
                renderPage();
            }
        });

        // Parallax effect on mouse move
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 2;
            const y = (e.clientY / window.innerHeight - 0.5) * 2;
            jungleContainer.style.transform = `translate(${x * 5}px, ${y * 5}px)`;
        });

        // --- Core Functions ---
        function renderPage() {
            // Apply exiting animation before changing content
            pageContent.classList.remove('active');
            pageContent.classList.add('exiting');
            
            pageFlipSound.play().catch(e => console.log("Audio playback failed:", e));

            setTimeout(() => {
                // Clear existing content
                pageContent.innerHTML = '';
                pageContent.classList.remove('exiting');
                
                // Load content based on current page index
                const page = story[currentPage];

                const pageTitle = document.createElement('h2');
                pageTitle.textContent = page.title;
                pageTitle.classList.add('page-title');
                
                const pageText = document.createElement('p');
                pageText.textContent = page.text;
                pageText.classList.add('page-text');

                const illustrationsContainer = document.createElement('div');
                illustrationsContainer.classList.add('illustrations');
                
                page.images.forEach(img => {
                    const frame = document.createElement('div');
                    frame.classList.add('illustration-frame');
                    const imageElement = document.createElement('img');
                    imageElement.src = img.src;
                    imageElement.alt = img.alt;
                    frame.appendChild(imageElement);
                    illustrationsContainer.appendChild(frame);
                });

                pageContent.appendChild(pageTitle);
                pageContent.appendChild(pageText);
                pageContent.appendChild(illustrationsContainer);

                // Add stars on the final page
                const isFinalPage = currentPage === totalPages - 1;
                const stars = document.querySelectorAll('.star');
                if (isFinalPage) {
                    if (stars.length === 0) {
                        for (let i = 0; i < 20; i++) {
                            createStar();
                        }
                    }
                    setTimeout(() => {
                        document.querySelectorAll('.star').forEach(star => star.style.opacity = '1');
                    }, 500); // Wait for page transition
                } else {
                     document.querySelectorAll('.star').forEach(star => star.style.opacity = '0');
                }

                // Update navigation state
                prevBtn.disabled = currentPage === 0;
                nextBtn.disabled = currentPage === totalPages - 1;
                pageCounter.textContent = `Page ${currentPage + 1} of ${totalPages}`;

                // Save progress to localStorage
                localStorage.setItem('storybookCurrentPage', currentPage);

                // Apply active animation
                pageContent.classList.add('active');

            }, 500); // Match transition duration
        }
        
        function createStar() {
            const star = document.createElement('div');
            star.classList.add('star');
            star.style.top = `${Math.random() * 100}%`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 2}s`;
            jungleContainer.appendChild(star);
        }

        function renderCoverPage() {
            pageContent.innerHTML = ''; // Clear previous content
            navigation.style.display = 'none';

            const coverContainer = document.createElement('div');
            coverContainer.classList.add('cover-page');

            const title = document.createElement('h1');
            title.textContent = 'The Magical Jungle';

            const coverImage = document.createElement('img');
            coverImage.src = 'https://i.imgur.com/KLMNwO0.jpeg';
            coverImage.alt = 'Cover of The Magical Jungle Storybook';
            
            coverContainer.appendChild(title);
            coverContainer.appendChild(coverImage);
            coverContainer.appendChild(startButton);

            pageContent.appendChild(coverContainer);
            pageContent.classList.add('active');
        }

        // --- Initialization ---
        function init() {
            const savedPage = localStorage.getItem('storybookCurrentPage');
            if (savedPage !== null && savedPage < totalPages) {
                currentPage = parseInt(savedPage, 10);
                if (currentPage > -1) {
                    renderPage();
                    navigation.style.display = 'flex';
                } else {
                    renderCoverPage();
                }
            } else {
                renderCoverPage();
            }
        }

        window.onload = init;
    </script>
</body>
</html>
